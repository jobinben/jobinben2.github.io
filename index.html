<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/ice.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/ice.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/ice.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svgd?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="大冰">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="大冰">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大冰">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>大冰</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">大冰</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">可乐要加冰 | 前端要走心</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            目录
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            个人简历
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/05/04/talk-shallowly-login/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/05/04/talk-shallowly-login/" itemprop="url">浅谈登陆机制-JWT-oauth2.0</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-05-04T21:07:35+08:00">
                2022-05-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="权限的控制机制"><a href="#权限的控制机制" class="headerlink" title="权限的控制机制"></a>权限的控制机制</h2><p>说到了登陆，那么我们会联想到权限的控制，决定用户登陆后的一些访问以及控制的权限。谈到权限的控制机制，目前使用的有<code>Session</code>，<code>Token</code>，<code>JWT（JSON Web Token）</code>，<code>oauth2.0</code>等等。</p>
<h3 id="1-Session"><a href="#1-Session" class="headerlink" title="(1) Session"></a>(1) Session</h3><p>对比起 <code>Cookie</code>，<code>Session</code> 是存储在服务器端的会话，相对安全，并且不像 <code>Cookie</code> 那样有存储长度限制，由于 <code>Session</code> 是以文本文件形式存储在服务器端的，所以不怕客户端修改 <code>Session</code> 内容。</p>
<p>通过session认证登陆的一个流程：</p>
<ol>
<li>用户向服务器发送账户和密码。</li>
<li>服务器验证通过后，在当前对话（session）里保存相关数据，比如用户角色、登录时间等等。</li>
<li>服务器向用户返回一个session_id, 写入用户的Cookie。</li>
<li>随后，用户的每次请求，都会通过Cookie的session_id传回服务器。</li>
<li>服务器收到session_id后，查询之前保存的数据，就可得知用户的身份与权限。</li>
</ol>
<p>在单体应用下，这种认证登陆以及权限的控制方式，基本没什么问题。</p>
<p>而在集群服务，也就是部署到多台服务器的状况下，使用<code>Session</code>进行登录后的权限控制流程大概如下：</p>
<p><img src="/2022/05/04/talk-shallowly-login/session-login.png" alt="session-login"></p>
<p>在分布式架构的情况下，几台服务器的session是无法共享的，所以采用了复制<code>session</code>信息的方法，复制到另外几台的服务器上。这种方法会造成服务器的资源压力很大。也是一种缺陷。</p>
<p>为了解决<code>session</code>共享的问题，可以借用<code>Redis</code>持久化缓存,通过<code>Redis</code>集中的存储<code>session</code>信息。 流程如下：</p>
<p><img src="/2022/05/04/talk-shallowly-login/session-login-redis.png" alt="session-login-redis"></p>
<h3 id="2-Token"><a href="#2-Token" class="headerlink" title="(2) Token"></a>(2) Token</h3><p>在集群服务的情况下，我们还可以使用<code>Token</code>的形式，也就是服务器无状态的情况下，把服务器生成的<code>Token</code>存放在<code>Redis</code>中。<code>Redis</code>的数据结构是<code>key</code> 与 <code>value</code> 的形式，而此时的key可以存放<code>Token</code>，而<code>Value</code>可以存放用户登录后的<code>UserId</code>。而这个<code>key</code>和<code>value</code>如何存储还是取决于你自己设计。 </p>
<p>下面是采用<code>Token</code>进行登录权限控制的流程：</p>
<p><img src="/2022/05/04/talk-shallowly-login/token-login-redis.png" alt="token-login-redis"></p>
<p>关于密码在登录的过程，还可以采用MD5进行加密然后再进行加盐，可以确保它的安全性。</p>
<p><img src="/2022/05/04/talk-shallowly-login/pwd-add-salt.png" alt="pwd-add-salt"></p>
<p>不过每次都需要通过<code>token</code>去查询用户的身份，对服务器的压力也是非常大的。</p>
<h3 id="3-JWT"><a href="#3-JWT" class="headerlink" title="(3) JWT"></a>(3) JWT</h3><p><code>JSON Web Token (JWT)</code> 是一个开放标准 ( <a href="https://datatracker.ietf.org/doc/html/rfc7519" target="_blank" rel="noopener">RFC 7519</a> )，它用于在各方之间以 <code>JSON</code> 对象的形式安全传输信息。此信息可以验证和信任，因为它是数字签名的。<code>JWT</code> 可以使用密钥（使用<code>HMAC</code>算法）或使用<code>RSA</code>或<code>ECDSA</code>的公钥/私钥对进行签名。</p>
<p>JWT的主要组成部分：</p>
<ol>
<li>Header 头部</li>
<li>Payload 有效负载</li>
<li>Signature 验证签名</li>
</ol>
<h4 id="1-Header-存放的数据"><a href="#1-Header-存放的数据" class="headerlink" title="1. Header 存放的数据"></a>1. Header 存放的数据</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "alg": "HS256", // 加密的算法</span><br><span class="line">  "typ": "JWT"    // jwt类型</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-Payload-装载的数据"><a href="#2-Payload-装载的数据" class="headerlink" title="2. Payload 装载的数据"></a>2. Payload 装载的数据</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"Jobin"</span>,</span><br><span class="line">  <span class="attr">"admin"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-Signature-验证签名数据"><a href="#3-Signature-验证签名数据" class="headerlink" title="3. Signature 验证签名数据"></a>3. Signature 验证签名数据</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + <span class="string">"."</span> +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">  your<span class="number">-256</span>-bit-secret</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="4-JWT底层结构原理"><a href="#4-JWT底层结构原理" class="headerlink" title="4. JWT底层结构原理"></a>4. JWT底层结构原理</h4><p>通常我们看到的JWT是这样子的，如：<code>xxxxxxx.yyyyyyyy.zzzzz</code><br>它们是三个用点分隔的 <code>Base64-URL</code> 字符串，可以在 <code>HTML</code> 和 <code>HTTP</code> 环境中轻松传递，同时与基于 <code>XML</code> 的标准（如 <code>SAML</code>）相比更相似。<br>该 <code>JWT</code> 具有先前的<code>header</code>(头部)和<code>Payload</code>(有效负载编码)，并使用<code>Signature</code>(秘钥签名)。<br>也就是把上面的<code>xxxxxxx.yyyyyyyy.zzzzz</code> 相等于 <code>header.payload.signature</code></p>
<p><code>JWT</code>的数据是通过<code>Base64</code>进行编码和解码的，所以我们可以把一条<code>JWT</code>的数据去解码一下，看是否与之前的数据一致。</p>
<p>我们去<code>JWT</code>官方拿取<code>Payload</code>的数据去进行解码以及编码试试，可以从图中看出，就是一致的。也可以得出<code>JWT</code>的数据顺序。<strong>在JWT中的Payload数据是无法被篡改的，所以有一定的安全性。</strong><br><img src="/2022/05/04/talk-shallowly-login/jwt-io.png" alt="jwt-io"></p>
<p><code>Payload</code>的<code>JWT</code>数据解码后：</p>
<p><img src="/2022/05/04/talk-shallowly-login/jwt-base64-decode.png" alt="jwt-base64-decode"></p>
<h4 id="5-JWT的优缺点"><a href="#5-JWT的优缺点" class="headerlink" title="5. JWT的优缺点"></a>5. JWT的优缺点</h4><p>优点：</p>
<ol>
<li>不需要在服务器存放用户的数据，减轻服务器端压力</li>
<li>是<code>JSON</code>风格，轻量级</li>
<li>可跨语言</li>
</ol>
<p>缺点：</p>
<p>由于<code>JWT</code>生成之后是存放在<code>客户端（浏览器）</code>下的，当<code>Token</code>生成之无法修改：</p>
<ol>
<li>无法刷新<code>token</code>有效期 </li>
<li>无法销毁<code>token</code></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/28/vue3-jest-daily/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/28/vue3-jest-daily/" itemprop="url">vue3-jest-daily</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-28T09:55:04+08:00">
                2022-04-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-依赖安装"><a href="#1-依赖安装" class="headerlink" title="1. 依赖安装"></a>1. 依赖安装</h2><p>相关依赖根据<code>vue-jest</code>的<code>package.json</code>文件，查看依赖包的版本限制如何。从<code>peerDependencies</code>属性可以看出，对应的依赖版本限制如下：</p>
<p><img src="/2022/04/28/vue3-jest-daily/vue-jest-dependencies.png" alt="vue-jest-dependencies"></p>
<p>进行安装版本要求内的依赖包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babel-jest@26.0.0 jest@26.0.0 ts-jest@26.4.4 -D</span><br></pre></td></tr></table></figure></p>
<p>接着还需要安装测试库以及其他的依赖包，这类依赖包可以安装最新的版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vue/babel-preset-app @testing-library/vue@next @testing-library/user-event @testing-library/jest-dom @types/jest vue-jest@next @vue/test-utils@next -D</span><br></pre></td></tr></table></figure></p>
<p>关于测试库的使用的参考资料:</p>
<p><a href="https://testing-library.com/docs/ecosystem-jest-dom/" target="_blank" rel="noopener">Testing Library</a></p>
<p><a href="https://test-utils.vuejs.org/guide/" target="_blank" rel="noopener">Vue Test Utils</a></p>
<p><a href="https://jestjs.io/zh-Hans/docs/getting-started" target="_blank" rel="noopener">Jest</a></p>
<h2 id="2-相关配置"><a href="#2-相关配置" class="headerlink" title="2. 相关配置"></a>2. 相关配置</h2><p>jest.config.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	roots: [</span><br><span class="line">		<span class="string">'&lt;rootDir&gt;/vue/tenui/src/'</span></span><br><span class="line">	],</span><br><span class="line">	testMatch: [</span><br><span class="line">		<span class="string">'&lt;rootDir&gt;/vue/tenui/src/**/__tests__/**/*.&#123;vue,js,jsx,ts,tsx&#125;'</span>,</span><br><span class="line">		<span class="string">'&lt;rootDir&gt;/vue/tenui/src/**/*.&#123;spec,test&#125;.&#123;vue,js,jsx,ts,tsx&#125;'</span>,</span><br><span class="line">	],</span><br><span class="line">	testEnvironment: <span class="string">'jsdom'</span>,</span><br><span class="line">	transform: &#123;</span><br><span class="line">		<span class="string">'^.+\\.(vue)$'</span>: <span class="string">'&lt;rootDir&gt;/node_modules/vue-jest'</span>,</span><br><span class="line">		<span class="string">'^.+\\.(js|jsx|mjs|cjs|ts|tsx)$'</span>: <span class="string">'&lt;rootDir&gt;/node_modules/babel-jest'</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	transformIgnorePatterns: [</span><br><span class="line">		<span class="string">'&lt;rootDir&gt;/node_modules/'</span>,</span><br><span class="line">		<span class="string">'[/\\\\]node_modules[/\\\\].+\\.(js|jsx|mjs|cjs|ts|tsx)$'</span>,</span><br><span class="line">		<span class="string">'^.+\\.module\\.(css|sass|scss|less)$'</span>,</span><br><span class="line">	],</span><br><span class="line">	moduleFileExtensions: [</span><br><span class="line">		<span class="string">'vue'</span>,</span><br><span class="line">		<span class="string">'js'</span>,</span><br><span class="line">		<span class="string">'jsx'</span>,</span><br><span class="line">		<span class="string">'ts'</span>,</span><br><span class="line">		<span class="string">'tsx'</span>,</span><br><span class="line">		<span class="string">'json'</span>,</span><br><span class="line">		<span class="string">'node'</span>,</span><br><span class="line">	],</span><br><span class="line">	resetMocks: <span class="literal">true</span>,</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></p>
<p>babel.config.js</p>
<p>为了不影响其他环境的<code>presets</code>和<code>plugins</code>的配置，根据测试环境下返回要使用的<code>presets</code>和<code>plugins</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">api</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> isTest = api.env(<span class="string">'test'</span>);</span><br><span class="line">	<span class="comment">// You can use isTest to determine what presets and plugins to use.</span></span><br><span class="line">	<span class="keyword">if</span>(isTest) &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			presets: [</span><br><span class="line">				<span class="string">'@vue/app'</span>,</span><br><span class="line">			],</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>package.json</p>
<p>配置script属性下的运行指令<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "jest": "jest tenui\/src --watch"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p>
<h2 id="3-测试单文件SFC"><a href="#3-测试单文件SFC" class="headerlink" title="3. 测试单文件SFC"></a>3. 测试单文件SFC</h2><p>TreeSelectCascader.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cascader"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"popover-wrapper"</span> <span class="attr">v-if</span>=<span class="string">"popoverVisible"</span> <span class="attr">data-test</span>=<span class="string">"TreeSelectCascader"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">TreeSelectCascaderItem</span> <span class="attr">:sourceItem</span>=<span class="string">"source"</span> <span class="attr">:height</span>=<span class="string">"height"</span> <span class="attr">:selected</span>=<span class="string">"selected"</span> @<span class="attr">update:selected</span>=<span class="string">"onUpdateSelected"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    result: &#123;&#123; result &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>TreeSelectCascader.spec.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TreeSelectCascader <span class="keyword">from</span> <span class="string">"../TreeSelectCascader.vue"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mount &#125; <span class="keyword">from</span> <span class="string">"@vue/test-utils"</span>;</span><br><span class="line"></span><br><span class="line">test(<span class="string">'TreeSelectCascader: '</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// render component.</span></span><br><span class="line">  <span class="keyword">const</span> wrapper = mount(TreeSelectCascader);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// mounted</span></span><br><span class="line">  <span class="keyword">const</span> textNode = <span class="keyword">await</span> wrapper.get(<span class="string">'[data-test="TreeSelectCascader"]'</span>);</span><br><span class="line">  expect(textNode).toBeTruthy();</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="4-运行测试用例"><a href="#4-运行测试用例" class="headerlink" title="4. 运行测试用例"></a>4. 运行测试用例</h2><p>执行<code>package.json</code>下的<code>scripts</code>属性下配置好的<code>jest</code>指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run jest</span><br></pre></td></tr></table></figure>
<p>也可以通过<code>npx</code>运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx jest src --watch</span><br></pre></td></tr></table></figure></p>
<p>测试用例执行后的结果：</p>
<p><img src="/2022/04/28/vue3-jest-daily/test-unit-1.png" alt="test-unit-1"></p>
<h2 id="其他参考资料"><a href="#其他参考资料" class="headerlink" title="其他参考资料"></a>其他参考资料</h2><p><a href="https://zhuanlan.zhihu.com/p/377566681" target="_blank" rel="noopener">vue3-jest环境配置</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/technologySharing-5/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/technologySharing-5/" itemprop="url">MongoDB修仙录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T19:17:30+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="创建库的步骤"><a href="#创建库的步骤" class="headerlink" title="创建库的步骤"></a>创建库的步骤</h2><pre><code>在MongoDB中，集合(`collections`)代表的就是MySQL里的表。
文档(`documents`)代表的是就是MySQL里的行。
</code></pre><p>创建库时, <code>use 库名</code>, 就是进入一个数据库，如果没有这个数据库，用<code>use</code>进入这个库后，插入一条数据，便可以创建了这个库并添加一条数据。</p>
<h2 id="炼气期"><a href="#炼气期" class="headerlink" title="炼气期:"></a>炼气期:</h2><h3 id="（1）查询数据"><a href="#（1）查询数据" class="headerlink" title="（1）查询数据"></a>（1）查询数据</h3><ol>
<li><p>查询数据库，<code>show dbs</code></p>
</li>
<li><p>增加一条数据, <code>db.表名.insert({&quot;name&quot;:&quot;dabing&quot;, &quot;age&quot;: 18})</code></p>
</li>
<li><p>查询数据库里的集合(也就是表), <code>show collections</code></p>
</li>
<li><p>查询集合的数据,<code>db.表名.find()</code></p>
</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/technologySharing-5/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/technologySharing-4/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/technologySharing-4/" itemprop="url">Git篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T19:00:08+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Git篇"><a href="#Git篇" class="headerlink" title="Git篇"></a>Git篇</h1><h2 id="（1）练气期"><a href="#（1）练气期" class="headerlink" title="（1）练气期"></a>（1）练气期</h2><p>此阶段的教程是如何配置git，以及git的远程ssh和基本命令。</p>
<ol>
<li><p>安装git：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://git-scm.com/download/win</span><br></pre></td></tr></table></figure>
</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/technologySharing-4/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/technologySharing-3/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/technologySharing-3/" itemprop="url">踩坑篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T18:59:43+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="踩坑篇"><a href="#踩坑篇" class="headerlink" title="踩坑篇"></a>踩坑篇</h1><h2 id="（1）-vite打包时的一个ESBuild的问题"><a href="#（1）-vite打包时的一个ESBuild的问题" class="headerlink" title="（1） vite打包时的一个ESBuild的问题"></a>（1） vite打包时的一个ESBuild的问题</h2><ol>
<li><p>背景：vite编译时，报了一个esbuild的问题。</p>
</li>
<li><p>原因: <strong>package-lock.json</strong> 中 <strong>“node_modules/esbuild”</strong> 缺少 <strong>“hasInstallScript”: true</strong> , 所以esbuild的install.js没有运行生成esbuild.exe。</p></li></ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/technologySharing-3/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/technologySharing-2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/technologySharing-2/" itemprop="url">前端项目流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T18:59:38+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="前端项目篇"><a href="#前端项目篇" class="headerlink" title="前端项目篇"></a>前端项目篇</h1><p>当我们要熟悉一个项目的时候，首先看其<code>package.json</code>的<code>scripts</code>属性下的执行命令有哪些? 其次看打包构建工具的配置文件如何写，如<code>webpack</code>的<code>config</code>。</p>
<h2 id="1-进行查找入口在哪里？"><a href="#1-进行查找入口在哪里？" class="headerlink" title="1. 进行查找入口在哪里？"></a>1. 进行查找入口在哪里？</h2><p>   根据其步骤，在启动命令<code>start</code>里的配置可以知道涉及到了两个配置文件，一个是<code>webpack.pub.config.js</code>，一个是<code>vite</code>其对应的就是<code>vite.config.js</code>。<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/technologySharing-2/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/technologySharing-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/technologySharing-1/" itemprop="url">pub.js篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T18:59:31+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="（1）什么是pub-js"><a href="#（1）什么是pub-js" class="headerlink" title="（1）什么是pub.js"></a>（1）什么是pub.js</h2><ol>
<li><p>pub.js是什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pubjs是一个基于Sea.js进行封装的框架，模块方式采用的是CMD（通用模块定义）的规范。</span><br><span class="line">主要提供核心模块，基础布局框架，基础组件库，基础样式库，基础插件库和第三方库，帮助开发具体业务功能界面。</span><br></pre></td></tr></table></figure>
</li>
<li><p>pub.js如何挂载到window？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在web/config/init.js文件进行系统全局配置后，然后挂载到浏览器上的window。</span><br><span class="line">而在这个文件中同时也涉及到了一些《目录配置》，《自定义权限和路由权限》，《用户登录的回调》，</span><br><span class="line">《素材上传特殊处理》以及一些《枚举变量》。</span><br></pre></td></tr></table></figure>
</li>
</ol>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/technologySharing-1/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2022/04/23/testPage/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/04/23/testPage/" itemprop="url">Nest.js 篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-23T18:26:33+08:00">
                2022-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="Nest-js-篇"><a href="#Nest-js-篇" class="headerlink" title="Nest.js 篇"></a>Nest.js 篇</h1><h2 id="1-Nest-js是什么？"><a href="#1-Nest-js是什么？" class="headerlink" title="1. Nest.js是什么？"></a>1. Nest.js是什么？</h2>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Nest.js 是一个 Node.js 的后端框架，它是对Express上做了一层封装，解决了架构问题。</span><br><span class="line">它提供了 Express 没有的 MVC、IOC、AOP 等架构特性，使得代码更容易维护、扩展。</span><br></pre></td></tr></table></figure>
<h2 id="2-Nest-js的核心技术-MVC、IOC、AOP"><a href="#2-Nest-js的核心技术-MVC、IOC、AOP" class="headerlink" title="2. Nest.js的核心技术: MVC、IOC、AOP"></a>2. Nest.js的核心技术: MVC、IOC、AOP</h2>   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MVC,IOC,AOP是Nest.js编程上最常用的核心技术，而这些技术类似于Java的Spring，</span><br><span class="line">在社区上，有一句对它的描述: &quot;JS版的Spring&quot;。</span><br></pre></td></tr></table></figure>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2022/04/23/testPage/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/javascript-sort/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/javascript-sort/" itemprop="url">关于JavaScript数组的sort()的详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T21:34:07+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><strong>sort()是对数组排序的一个api，对原有数组元素进行位置排序，关于排序有几种方法，以下列出几种简单常用的方法供给大家参考：</strong></p>
<h2 id="1、简单数组排序"><a href="#1、简单数组排序" class="headerlink" title="1、简单数组排序"></a>1、简单数组排序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>);</span><br><span class="line">arr.sort();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"arr = "</span>, arr.join());<span class="comment">//输出 1,2，3,4，5； join的方法是把数组按默认的逗号拼接成一个字符串</span></span><br></pre></td></tr></table></figure>
<h2 id="2、简单数组的自定义排序"><a href="#2、简单数组的自定义排序" class="headerlink" title="2、简单数组的自定义排序"></a>2、简单数组的自定义排序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">3</span>);</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"arr = "</span>, arr.join());<span class="comment">//输出 1,2，3,4，5,；按小到大的排序；当b - a时；数组将会按大到小的排序；</span></span><br></pre></td></tr></table></figure>
<h2 id="3、简单对象列表（List）自定义属性排序"><a href="#3、简单对象列表（List）自定义属性排序" class="headerlink" title="3、简单对象列表（List）自定义属性排序"></a>3、简单对象列表（List）自定义属性排序</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/05/24/javascript-sort/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/21/deepCopy/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiabing Yu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="大冰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/21/deepCopy/" itemprop="url">手写深拷贝</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-21T13:23:38+08:00">
                2019-05-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>说到深拷贝，大家应该第一反应就是这两个方法：<strong>JSON.parse()</strong> 和 <strong>JSON.stringify()</strong><br>当然，这种方法需要保证对象是JSON的安全，所以只适用于部分情况。<br><strong>话不多说，直接上码：</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>)｛</span></span><br><span class="line"><span class="function">    //判断是否是简单数据类型</span></span><br><span class="line"><span class="function">    <span class="title">if</span>(<span class="params">typeof obj == <span class="string">"object"</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//复杂数据类型</span></span><br><span class="line">        <span class="keyword">var</span> result = obj.constructor == <span class="built_in">Array</span> ? [] : &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            result[i] = <span class="keyword">typeof</span> obj[i] == <span class="string">"object"</span> ? deepCopy(obj[i]) : obj[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//简单数据类型直接赋值</span></span><br><span class="line">        <span class="keyword">var</span> result = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">｝</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/header.jpg" alt="Jiabing Yu">
            
              <p class="site-author-name" itemprop="name">Jiabing Yu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiabing Yu</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
